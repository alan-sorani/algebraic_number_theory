\documentclass[11pt]{article}

\usepackage{math}

\usepackage{comment}

\usepackage{enumitem}

%---TITLE---

\title{Lecture Notes to a Course on Algebraic Number Theory \\ \small{Taught by Prof. Uri Shapira at Technion IIT during Spring 2022}}
\author{Typed by Elad Tzorani}
\date{\today}

\begin{document}

\maketitle

%TODO edit beginning sections and add course information

\section*{Course Information}

The course will be based on lecture notes by Ehud De Shalit on algebraic number theory, and partially on Milne's text on algebraic number theory (henceforward, ANT).

\section*{Prerequisites}

The course will assume undergraduate knowledge in ring theory and Galois theory.

\section{Notations \& Conventions}

%TODO organize this

\begin{itemize}
\item All rings are assumed to be commutative and unital, unless mentioned otherwise. 
\item The rings of integers, reals and complex numbers are respectively denoted $\mbb{Z}$, $\mbb{R}$ and $\mbb{C}$.
\item For $n \in \mbb{Z}_+$ we denote $\brs{n} = \set{1, \ldots, n}$.
\item We denote by $K$ an algebraic number field and by $n$ its degree $\deg_{\mbb{Q}}\prs{K}$ over $\mbb{Q}$, when none of these are specified.
\end{itemize}

\section{A Short Review on Rings}

\begin{definition}[Euclidean Ring]
Let $R$ be a ring. We say $R$ is \emph{Euclidean} if there is a map $N \colon R \to \mbb{Z}_+$ that satisfies the following properties.

\begin{enumerate}[label = (\roman*)]
\item \emph{Sub-multiplicativity:} $N\prs{a} = 0$ if and only if $a=0$, and
\[N\prs{\alpha \beta} \leq N\prs{\alpha} N\prs{\beta} \text{.}\]
\item For all $\alpha,\beta \in R$ such that $\alpha \neq 0$, there are $q,r \in R$ such that
\[\beta = q \alpha + r, \quad N\prs{r} < N\prs{\alpha} \text{.}\]
\end{enumerate}

Such a map is called the \emph{Euclidean norm} of $R$.
\end{definition}

\begin{definition}[Group of Units in a Ring]
Let $R$ be a ring. The \emph{group of units} in $R$ is
\[R^\times \coloneqq \set{\alpha \in R}{\exists \beta \in R \colon \alpha \beta = 1} \text{.}\]
\end{definition}

\begin{definition}[Associate Elements]
Let $R$ be a ring and let $\alpha,\beta \in R$. We say that $\alpha, \beta$ are \emph{associates}, and denote $\alpha \sim \beta$, if there's $\eps \in R^\times$ such that $\alpha = \eps \beta$.
\end{definition}

\begin{definition}[Reducible Element]
Let $R$ be a ring and let $\alpha \in R \setminus \set{0}$. We say that $\alpha$ is \emph{reducible} if there are $\beta,\gamma \in R \setminus R^\times$ such that $\alpha = \beta \cdot \gamma$.
\end{definition}

\begin{remark}
The subset of reducible elements of $R$ is $R^\times \cdot R^\times$.
\end{remark}

\begin{definition}[Irreducible Element]
Let $R$ be a ring. An element $\alpha \in R$ is \emph{irreducible} if it isn't reducible.
\end{definition}

\begin{definition}[Prime Elements]
Let $R$ be a ring and let $\alpha \in R \setminus \prs{R^\times \cup \set{0}}$. We say that $\alpha$ is \emph{prime} if for $\beta,\gamma \in R$ such that $\alpha \mid \beta \cdot \gamma$ one has either $\alpha \mid \beta$ or $\alpha \mid \gamma$.
\end{definition}

\begin{definition}[Ideal in a Ring]
Let $R$ be a ring. An \emph{ideal} of $R$ is a strict non-zero subset $I \subseteq R$ that is an additive subgroup and such that $aI, Ia \subseteq I$ for all $a \in R$.
\end{definition}

\begin{notation}
Let $R$ be a ring. We denote $I \leq R$ to say that $I$ is an ideal of $R$.
\end{notation}

\begin{definition}[Prime Ideal]
Let $R$ be a ring and let $I \leq R$. We say that $I$ is \emph{prime} if whenever $\beta,\gamma \in R$ are such that $\beta \cdot \gamma \in I$, one has $\beta \in I$ or $\gamma \in I$.
\end{definition}

\begin{definition}[Principal Ideal]
Let $R$ be a ring and let $\alpha \in R$. We denote
\[\prs{\alpha} \coloneqq \alpha \cdot R = \set{\alpha \cdot \beta}{\beta \in R} \text{.}\]
Ideals of this form are called \emph{principal ideals}.
\end{definition}

\begin{definition}
Let $R$ be a ring. We say that $R$ is a \emph{principal ideal domain (PID)} if any ideal of $R$ is principal.
\end{definition}

\begin{theorem}
Any Euclidean domain is PID.
\end{theorem}

\begin{lemma}
Let $R$ be a ring and let $\alpha \in R$. Then $\alpha$ is prime if and only if $\prs{\alpha}$ is a prime ideal.
\end{lemma}

\begin{lemma}
Let $R$ be a ring. Prime elements of $R$ are irreducible.
\end{lemma}

\begin{exercise}
Let $R$ be a ring and let $I \leq R$. Then $I$ is prime if and only if $R/I$ is an integral domain.
\end{exercise}

\begin{exercise}
Let $R$ be a ring. An ideal $I \leq R$ is maximal if and only if $R/I$ is a field.
\end{exercise}

\begin{corollary}
Maximal ideals are prime.
\end{corollary}

\begin{exercise}
Let $R$ be a ring and let $\alpha \in R$. Then $\alpha$ is irreducible if and only if $\prs{\alpha}$ is maximal among principal ideals.
\end{exercise}

\begin{definition}[Unique Factorization Domain]
Let $R$ be a ring. We say that $R$ is a \emph{unique factorization domain (UFD)} if any $\alpha \in R$ can be written as $\alpha = \beta_1 \cdot \ldots \cdot \beta_k$ where $\beta_i \in R$ are irreducible, and if $\beta_1 \cdot \ldots \cdot \beta_k = \gamma_1 \cdot \ldots \cdot \gamma_\ell$ are two products of irreducible elements  of $R$, then $\ell = k$ and there is a bijection $\sigma \colon \brs{k} \to \brs{k}$ such that $\beta_i \sim \gamma_{\sigma\prs{i}}$.
\end{definition}

\begin{corollary}
Let $R$ be a PID or a UFD. Any irreducible ideal of $R$ is prime.
\end{corollary}

\begin{exercise}
A PID is also a UFD.
\end{exercise}

\begin{example}
Consider the ring $R \coloneqq \mbb{Z}\brs{\sqrt{-5}}$. We can write
\[6 = 2 \cdot 3 = \prs{1 + \sqrt{-5}}\prs{1 - \sqrt{-5}}\]
which are two possible decompositions of $6$ in $\mbb{Z}\brs{\sqrt{-5}}$. We claim that $2,3, \prs{1+\sqrt{-5}}, \prs{1+\sqrt{-5}}$ are all irreducible and non-associates, which implies that $\mbb{Z}\brs{\sqrt{-5}}$ is not a UFD.

On $R$ we have a multiplicative \emph{norm} map (that doesn't make it an Euclidean domain)
\begin{align*}
N \colon \mbb{Z}\brs{\sqrt{-5}} &\to \mbb{Z} \\
a + b\sqrt{-5} &\mapsto \prs{a+b\sqrt{-5}}\prs{a - b\sqrt{-5}} = a^2 + 5 b^2 \text{.}
\end{align*}

One can use $N$ to check that $2,3, \prs{1+\sqrt{-5}}, \prs{1+\sqrt{-5}}$ are irreducible and non-associates.
\end{example}

\begin{exercise}
Use $N$ to check that $2,3, \prs{1+\sqrt{-5}}, \prs{1+\sqrt{-5}}$ are irreducible and non-associates.
\end{exercise}

\section{Preliminaries to Algebraic Number Theory}

\subsection{Definition and Motivation}

ANT is the study of finite field extensions of $\mbb{Q}$ and their rings of integers. ANT is used in solving and analysis of questions about integers.

\begin{definition}[Number Field]
A field $K$ is called a \emph{number field} if $\mbb{Q} \subseteq K$ and \[\brs{K : \mbb{Q}} \coloneqq \deg\prs{K/\mbb{Q}} < \infty \text{.}\]
\end{definition}

\begin{definition}[$p$-Adic Valuation]
Let $n \in \mbb{Z}$ and let $p \in \mbb{Z}$ be a prime. For $n \neq 0$, we denote by $v_p\prs{n}$ the power in which $p$ appears in the decomposition of $n$ into primes; we denote also $v_p\prs{0} = \infty$.
We call $v_p \colon \mbb{Z} \to \mbb{Z} \cup \set{\infty}$ the \emph{$p$-adic valuation}.
\end{definition}

\begin{theorem}[Fermat]
An integer $n \in \mbb{Z}$ is a sum of two squares if and only if for any $q \in \mbb{Z}$ satisfying $q \equiv 3 \mod{4}$ one has $v_q\prs{n} \in 2 \mbb{Z}$.
\end{theorem}

\begin{proof}
Consider the ring $R = \mbb{Z}\brs{i}$ of \emph{Gaussian integers} and the \emph{norm}
\begin{align*}
N \colon \mbb{Z}\brs{i} &\to \mbb{Z} \\
a + bi &\mapsto \prs{a+bi}\prs{a-bi} = a^2 + b^2 \text{.}
\end{align*}

\begin{itemize}
\item

We first claim that $R$ is an Euclidean domain. We show this by showing that $N$ is an Euclidean norm.
Let $\alpha,\beta \in R$ with $\alpha \neq 0$. We want to find $q,r \in \mbb{Z}\brs{i}$ such that $N\prs{r} < N\prs{\alpha}$ and $\beta = q \alpha + r$.
Write $\beta = \beta / \alpha \cdot \alpha$ in $\mbb{Q}\brs{i} = \mrm{Frac}\prs{R}$. For any $q \in \mbb{Z}\brs{i}$ we can write
\begin{align*}
\beta &= \alpha + \frac{\beta}{\alpha} \cdot \alpha - q \cdot \alpha \\&= q \cdot \alpha + \alpha\prs{\frac{\beta}{\alpha} - q} \text{.}
\end{align*}
Extend $N \colon \mbb{Q}\prs{i} \to \mbb{Q}$ via $N\prs{a + bi} = a^2 + b^2$.
We show that there's $q \in \mbb{Z}\brs{i}$ such that $N\prs{\beta / \alpha - q} < 1$, from which $N\prs{\alpha\prs{\beta / \alpha - q}} < N\prs{\alpha}$ by sub-multiplicativity, as required.
Indeed, each point of $\mbb{C}$ is within distance at most $1$ from the lattice $\mbb{Z}\brs{i}$.\footnote{We say that the \emph{covering radius} of $\mbb{Z}\brs{i} \subseteq \mbb{C}$ is $\sqrt{2}/2$, since this is the smallest number for which any ball in $\mbb{C}$ of radius $r$ contains a point of $\mbb{Z}]\prs{i}$.}

\item
We now show that
\begin{align*}
\mbb{Z}\brs{i}^\times &= \set{\alpha \in \mbb{Z}\brs{i}}{N\prs{\alpha \in \set{\pm 1}}}
\\&= \set{\pm 1, \pm i} \text{.}
\end{align*}
Let $\alpha \in R$. If $N\prs{\alpha} = \alpha \bar{\alpha} = 1$, we get that $\alpha \in \mbb{Z}\brs{i}^\times$. On the other hand, if $\alpha \cdot \beta = 1$, we get \[N\prs{\alpha} N\prs{\beta} = N\prs{\alpha \beta} = N\prs{1} = 1\]
so $N\prs{\alpha} \in \mbb{Z}^\times$ so $N\prs{\alpha} \in \set{\pm 1}$. \footnote{Note that in our case, $N\prs{\alpha} \geq 0$ so it follows that $N\prs{\alpha} = 1$. The statement is more general when one requires $N\prs{\alpha} \in \set{\pm 1}$ instead.}

\item We want to understand
\[\im\prs{N} = \set{N\prs{z} = z \bar{z}}{z \in \mbb{Z}} = \set{a^2 + b^2}{a,b \in \mbb{Z}} \text{.}\]

\begin{itemize}
\item Let $p$ be a \emph{rational prime} (i.e. prime in $\mbb{Z}$. 
We have
\begin{align*}
\mbb{Z}\brs{i} / \prs{p} &\cong \mbb{Z}\brs{x} / \prs{x^2 + 1, p}
\\&\cong \mbb{F}_p\brs{x}
\end{align*}
so $p$ remains a prime in $\mbb{Z}\brs{i}$ if and only if $-1$ is not a square in $\mbb{F}_p$.

\item We claim that $-1$ is a square in $\mbb{F}_p$ if and only if $p \equiv 1 \mod{4}$. From this and the above calculation we get that $p$ remains a prime in $\mbb{Z}\brs{i}$ if and only if $p \equiv 3 \mod{4}$.

Consider
\begin{align*}
\varphi \colon \mbb{F}_p^\times &\to \mbb{F}_p^\times \\
\alpha &\mapsto \alpha^2 \text{.}
\end{align*}
We have $\ker\prs{\varphi} = \set{\pm 1}$, so by the isomorphism theorem $\im\prs{\varphi}$ is a subgroup of $\mbb{F}_p^\times$ of size $\#\mbb{F}_p / \#\set{\pm 1} = \frac{p-1}{2}$.
We get that $-1 \in \im\prs{\varphi}$ if and only if $\left. \ker\prs{\varphi} \right|_{\im\prs{\varphi}} \neq \set{1}$.
Now, $\mbb{F}_p^\times$ is a cyclic group of order $p-1$ and $\im\prs{\varphi} \subseteq \mbb{F}_p^\times$ is another cyclic group of size $\frac{p-1}{2}$; hence this is the case when $2$ and $\frac{p-1}{2}$ are coprime, or equivalently $p \equiv 1 \mod{4}$.

\item Note that $2 = \prs{1+i}\prs{1-i}$, where $1 \pm i$ are irreducible because $N\prs{1+i}$ is prime in $\mbb{Z}$. Hence this is a decomposition of $2$ into a product of irreducible elements and in particular $2$ isn't prime in $\mbb{Z}\brs{i}$. (\textbf{Exercise:} Write formally why $1 \pm i$ are irreducible elements of $\mbb{Z}\brs{i}$.)

\item If $p \equiv 1 \mod{4}$ is a rational prime, we claim that there's an irreducible element $\pi \in \mbb{Z}\brs{i}$ for which $p = \pi \bar{\pi}$ and $N\prs{\pi} = p$.

To show this, write $p = \pi \lambda$ for $\pi$ irreducible and $\lambda$ non-unit. We get
\begin{align*}
p^2 &= N\prs{p}
\\&= N\prs{\pi} \cdot N\prs{\lambda}
\\&= \pi \bar{\pi} \cdot \lambda \bar{\lambda} \text{.}
\end{align*}
Since $\lambda$ is a non-unit, we get $\lambda \bar{\lambda} \neq 1$, so $\lambda \bar{\lambda} \in \set{p, p^2}$. Similarly, $\pi \bar{\pi} \in \set{p, p^2}$, hence $\pi \bar{\pi} = \lambda \bar{\lambda} = p$, as required.

\item We claim that if $\pi \in \mbb{Z}\brs{i}$ is an irreducible element other than $1 \pm i$ and not in $\mbb{Z}$, then $p coloneqq \pi \bar{\pi}$ is a rational prime with $p \equiv 1 \mod{4}$.

Indeed, consider $p \coloneqq N\prs{\pi} = \pi \bar{\pi}$ is a product of rational primes. By the uniqueness of the decomposition it follows that $p \equiv 1 \mod{4}$ is a rational prime.
\end{itemize}

In conclusion, taking $z \in \mbb{Z}\brs{i}$ we can write
\[z = \eps \prs{1 + i}^r \prs{\prod_{i \in [k]} \pi_i^{m_i}} \prs{\prod_{j \in \brs{\ell}} q_j^{n_j}}\]
for $\eps \in \mbb{Z}\brs{i}$ a unit, $\pi_i$ primes in $\mbb{Z}\brs{i}$ of norms $p_i$ which are rational primes with $p_i \equiv 1 \mod{4}$, and $q_j$ are rational primes with $q_j \equiv 3 \mod{4}$.
We get that
\[N\prs{z} = 2^r \prs{\prod_{i \in [k]} p_i^{m_i}} \prs{\prod_{j \in \brs{\ell}} q_j^{2 m_j}} \text{.}\]
From here one gets the result.
\end{itemize}
\end{proof}

\subsection{Field Embeddings}

\begin{definition}[Field Embedding]
Let $K,L$ be two fields. Field homomorphisms $\sigma \colon K \to L$ are called \emph{field embeddings}.
The collection of such embeddings is denoted
$\mrm{Emb}\prs{K,L}$.
\end{definition}

\begin{definition}[Real \& Complex Embeddings]
An embedding $\sigma \in \mrm{Emb}\prs{K,\mbb{C}}$ is called \emph{real} if $\sigma\prs{K} \subseteq \mbb{R}$.
It is called \emph{complex} otherwise.
\end{definition}

\begin{theorem}
Let $K$ be a degree $n$ number field. There are exactly $n$ distinct embeddings $\sigma_i \colon K \to \mbb{C}$.
\end{theorem}

\begin{corollary}
Let $K$ be an algebraic number field of degree $n$.
There are $r_1, r_2 \in \mbb{Z}$ non-negative with $r_1$ real embeddings and $2 r_2$ complex embeddings which are divided into pairs of the form $\sigma, \bar{\sigma}$. We have $n = r_1 + 2 r_2$.

We fix an ordering of $\mrm{Emb}\prs{K,\mbb{C}}$:
\[\sigma_1, \ldots, \sigma_{r_1}, \sigma_{r_1 + 1}, \ldots, \sigma_{r_1 + r_2}, \sigma_{r_1 + r_2 + 1}, \ldots, \sigma_{r_1 + 2 r_2}\]
such that $\sigma_{r_1 + 1}, \ldots, \sigma_{r_1}$ are real embeddings, $\sigma_{r_1 + 1}, \ldots, \sigma_{r_1 + r_2}$ are non-conjugate complex embeddings, and for all $i \in \brs{r_2}$ one has $\bar{\sigma}_{r_1 + r_2 + j} = \sigma_{r_1 + j}$.
\end{corollary}

\begin{definition}[Geometric Embedding of a Field into $\mbb{R}^n$]
Let $K$ be an algebraic number field of degree $n$. Let $r_1, r_2$ be as in the above corollary.
We define a $\mbb{Q}$-linear map
\begin{align*}
\varphi \colon K &\to \mbb{R}^n \cong \mbb{R}^{r_1} \times \prs{\mbb{R}^2}^{r_2} \\
\alpha &\mapsto \prs{\sigma_1\prs{\alpha}, \sigma_2\prs{\alpha}, \ldots, \sigma_{r_1}\prs{\alpha}, \Re\prs{\sigma_{r_1 + 1}\prs{\alpha}}, \Im\prs{\sigma_{r_1 + 1}\prs{\alpha}}, \ldots, \Re\prs{\sigma_{r_1 + r_2}\prs{\alpha}}, \Im\prs{\sigma_{r_1 + r_2}\prs{\alpha}}} \text{.}
\end{align*}
This is called the \emph{geometric embedding of $K$ into $\mbb{R}^n$}.
\end{definition}

\begin{proposition}
Let $K$ be an algebraic number field of degree $n$, and let $\varphi$ be as above. Then $\varphi\prs{K}$ contains an $\mbb{R}$-basis of $\mbb{R}^n$.
\end{proposition}

%TODO fill in first hour from ipad

\section{Full Modules \& Lattices}

\subsection{Full Modules}

\begin{definition}[Full Module]
A $\mbb{Z}$-module $\Lambda \subseteq K$ in a field $K$ is called a \emph{full module} of $K$ if it is a finitely-generated $\mbb{Q}$-module and also $\Span_{\mbb{Q}}\prs{\Lambda} = K$.
\end{definition}

\begin{example}
Taking $K = \mbb{Q}$, there is a full module $\mbb{Z} \subseteq K$.
\end{example}

\begin{example}
Taking $K = \mbb{Q}$, the subset $\mbb{Z}\brs{\frac{1}{2}}$ isn't a full module of $K$ because it is \emph{not} finitely generated.
\end{example}

\begin{example}
If $\alpha \in K$ is the root of a monic degree-$n$ irreducible polynomial,
\[\alpha^n + a_{n-1} \alpha^{n-1} + \ldots + a_0 = 0\]
for $a_i \in \mbb{Z}$, we get that $1, \alpha, \ldots, \alpha^{n-1}$ is a basis of $K/\mbb{Q}$.
Then $\Lambda = \mbb{Z}\brs{\alpha}$ is a full module of $K$.
\end{example}

\begin{lemma}
The following are equivalent for a $\mbb{Z}$-module $\Lambda \subseteq K$.

\begin{enumerate}
\item $\Lambda$ is a finitely-generated $\mbb{Z}$-module such that $\Span_{\mbb{Q}}\prs{\Lambda} = K$.
\item $\Lambda$ is a finitely-generated $\mbb{Z}$-module that contains a $\mbb{Q}$-basis of $K$.
\item $\Lambda = \Span_{\mbb{Z}}\prs{\alpha_1, \ldots, \alpha_n}$ for some basis $\prs{\alpha_1, \ldots, \alpha_n}$ of $K/\mbb{Q}$. 
\end{enumerate}
\end{lemma}

\begin{proof}
Clearly, the third condition implies the first two. We show that the second condition implies the third.

By the structure theorem of finitely-generated abelian groups, we have $\Lambda \cong \mbb{Z}^m$ (as $\mbb{Z}$-modules) for some $m \in \mbb{N}_+$ (since there is no torsion in the additive group of $K$).
If $m < n$, we get a contradiction to the assumption that $\Lambda$ contains a $\mbb{Q}$-basis of $K$.
If $m > n$, we get a contradiction by the same reasoning.
Hence $m = n$ which gives the result.
\end{proof}

\begin{definition}
Let $M_1, M_2$ be submodules of $K$. We define
\[M_1 \cdot M_2 \coloneqq \set{\sum_{i \in \brs{\ell}} a_i b_i}{\substack{\ell \in \mbb{N} \\ a_i \in M_1 \\ b_i \in M_2}}\]
which is the module generated by the products $a b$ for $a \in M_1$ and $b \in M_2$.
\end{definition}

\begin{proposition}
Let $\Lambda_1, \Lambda_2 \subseteq K$ be full modules. Then $\Lambda_1 \cdot \Lambda_2$ is also a full module of $K$.
\end{proposition}

\begin{proof}
We have to show that $\Lambda_1 \cdot \Lambda_2$ is a finitely-generated $\mbb{Z}$-module, which is indeed the case since if $\Lambda_1 = \Span_{\mbb{Z}}\prs{\alpha_1, \ldots, \alpha_n}$ and $\Lambda_2 = \Span_{\mbb{Z}}\prs{\beta_1, \ldots, \beta_n}$, then
\[\Lambda_1 \cdot \Lambda_2 = \Span_{\mbb{Z}}\prs{\alpha_i \beta_j}_{i,j \in [n]} \text{.}\]
\end{proof}

\begin{proposition}
Let \[\Lambda = \Span_{\mbb{Z}}\prs{\alpha_1, \ldots, \alpha_n} = \Span_{\mbb{Z}}\prs{\beta_1, \ldots, \beta_n}\] be a full module in $K$. Then
\[\brs{\id_{\mbb{Z}}}^{\vec{\alpha}}_{\vec{\beta}}, \brs{\id_K}^{\vec{\beta}}_{\vec{\alpha}}\]
are inverse $\mbb{Z}$-matrices and are therefore in $\mrm{GL}_n\prs{\mbb{Z}}$.
\end{proposition}

\subsection{Lattices}

\begin{definition}
An additive subgroup $L \leq \mbb{R}^n$ is a \emph{lattice} if $L = \Span_{\mbb{Z}}\prs{v_1, \ldots, v_n}$ for an $\mbb{R}$-basis $\prs{v_1, \ldots, v_n}$ of $\mbb{R}^n$.
\end{definition}

\begin{remark}
The theorem from the beginning of the class
%TODO fill in and ref
can be restated as saying that the geometric embedding of a full module is a lattice.
\end{remark}

\begin{exercise}
Show that the following are equivalent for an additive subgroup $L \leq \mbb{R}^n$.

\begin{enumerate}
\item $L$ is discrete and $\Span_{\mbb{R}}\prs{L} = \mbb{R}^n$.

\item $L$ is discrete and contains an $\mbb{R}$-basis of $\mbb{R}^n$.

\item $L = \Span_{\mbb{Z}}\set{v_1, \ldots, v_n}$ for some $\mbb{R}$-basis $\prs{v_1, \ldots, v_n}$.

\item $L$ is discrete and co-compact.
\end{enumerate}

\textbf{Hint:} The third condition implies the first because $L$ can be seen as $A \mbb{Z}^n$ for $A = \pmat{\vert & & \vert \\ v_1 & \cdots & v_n \\ \vert & & \vert}$.
The second condition implies the third by taking the $\mbb{R}$-basis in the assumption and using the fact that $L$ is discrete. 
\end{exercise}

\begin{proposition}
If \[L = \Span_{\mbb{Z}}\prs{v_1, \ldots, v_n} = \Span_{\mbb{Z}}\prs{w_1, \ldots, w_n}\]
and
\begin{align*}
g \coloneqq \pmat{\vert & & \vert \\ v_1 & \cdots & v_n \\ \vert & &  \vert} ,\quad h \coloneqq \pmat{\vert & & \vert \\ w_1 & \cdots & w_n \\ & &}
\end{align*}
then $h^{-1} g \in \mrm{GL}_n\prs{\mbb{Z}}$ and in particular $\abs{\det\prs{g}} = \abs{\det\prs{h}}$.
\end{proposition}

\begin{proof}
By the assumption $L \coloneqq g \mbb{Z}^n = h \mbb{Z}^n$, so
\[h^{-1} g \mbb{Z}^n = \mbb{Z}^n \text{.}\]
Hence $h^{-1} g$ has integral coefficients.
Similarly,
$\mbb{Z}^n = g^{-1} h \mbb{Z}^n$, so $g^{-1} h$ has integral coefficients, hence the result.
\end{proof}

\begin{definition}
Let $L \leq \mbb{R}^n$ be a lattice in $\mbb{R}^n$. We define
\[\mrm{Vol}\prs{\mbb{R}^n / L} \coloneqq \abs{\det\prs{g}}\]
where $L = g \mbb{Z} = \Span_{\mbb{Z}}\prs{v_!, \ldots, v_n}$.
\end{definition}

\begin{remark}
Note that
\[F_0 \coloneqq \set{\pmat{x_1 \\ v_n} \in \mbb{R}^n}{0 \leq x_i < 1}\]
and
\[\mbb{R}^n = \bigsqcup_{\vec{m} \in \mbb{Z}^n} F_0 + \vec{m} \text{,}\]
hence $L = g \mbb{Z}^n$
implies
\[\mbb{R}^n = g\mbb{R}^n = \bigcup_{v \in L} g F_0 + v \text{.}\]
\end{remark}

\begin{definition}
Let $\prs{v_1, \ldots, v_n}$ be a basis of $\mbb{R}^n$ and let $g = \pmat{\vert & & \vert \\ v_1 & \cdots & v_n \\ \vert & & \vert}$.
Then $g F_0 = \set{\sum_{i \in \brs{n}} x_i v_i}{0 \leq x_i < 1}$ is called the \emph{parallelopiped} spanned by $v_1, \ldots, v_n$.
\end{definition}

\begin{definition}
Let $H_1 \leq H_2$ be abelian groups. We say that a subset $F \subseteq H_2$ is a \emph{fundamental domain} for $H_1$ if
\[H_1 = \bigsqcup_{v \in H_1} \prs{F + v} \text{.}\]
\end{definition}

\begin{remark}
In the above terminology, the parallelopiped $g \cdot F_0$ is a fundemntal domain for $L = g \mbb{Z}^n$ in $\mbb{R}^n$.
\end{remark}

\begin{proposition}
Let $H_1 \leq H_2 \leq H_3$ be abelian groups, let $F_1 \subseteq  H_2$ be a fundamental domain for $H_1$ and let $F_2 \subseteq H_3$ be a fundamental domain for $H_2$. Then $F_1 + F_2$ is a fundamental domain of $H_1$ in $H_3$.
\end{proposition}

\begin{proof}
By assumption
\begin{align*}
H_2 &= \bigsqcup_{v \in H_1} F_1 + v \\
H_3 &= \bigsqcup_{w \in H_2} F_2 + w \text{.}
\end{align*}
So,
\begin{align*}
H_3 &= \bigsqcup_{v \in H_1} \bigsqcup_{f \in F_1} \prs{F_2 + f + v}
\\&= \bigsqcup_{v \in H_1} \prs{F_2 + F_1 + v} \text{.}
\end{align*}
In fact, $\bigsqcup_{f \in F_1} F_2 + f = F_1 + F_2$.
\end{proof}

\begin{exercise}
Let $L \subseteq \mbb{Z}^2$ be the lattice of points where the sum of standard coordinates is even. Check that a fundamental domain for $L$ cannot be built up as unions of translations of the standard cube.
\end{exercise}

\begin{corollary}\label{corollary:sublattice_covolume}
If $L_1 \leq L_2 \leq \mbb{R}$ are abelian groups, and $L_2$ is a lattice then $L_1$ is a lattice in $\mbb{R}^n$ if and only if $\brs{L_2 : L_1} < \infty$.
Furthermore, in this case
\[\mrm{Vol}\prs{\mbb{R}^n / L_1} = \brs{L_2 : L_1} \mrm{Vol}\prs{\mbb{R}^n / L_2} \text{.}\]
\end{corollary}

\begin{lemma}\label{lemma:fd_volume}
If $F_1, F_2 \subseteq \mbb{R}^n$ are two fundamental domains of a discrete subgroup $M \leq \mbb{R}^n$, then $\mrm{Vol}\prs{F_1} = \mrm{Vol}\prs{F_2}$.
\end{lemma}

\begin{proof}
Write
\[\mbb{R}^n = \bigsqcup_{w \in L} \prs{F_1 + w} = \bigsqcup_{w \in L} \prs{F_2 + w} \text{.}\]
We get that
\[F_1 = F_1 \cap \mbb{R}^n = F_! \cap \bigsqcup_{w \in L} \prs{F_2 + w} = \bigsqcup_{w \in L} \prs{F_1 \cap \prs{F_2 + w}} ]text{.}\]
Then
\[\mrm{Vol}\prs{F_1} = \sum_{w \in L} \mrm{Vol}\prs{F_1 \cap \prs{F_2 + w}} = \sum_{W \in L}\mrm{Vol}\prs{\prs{F_1 + w} \cap F_2}\]
and by the same reasoning this is equal to $\mrm{Vol}\prs{F_2}$, hence the result.
\end{proof}

\begin{proof}[\ref{corollary:sublattice_covolume}]
Choose a fundamental domain $F$ for $L_2$ in $\mbb{R}^n$ and choose a set of representatives $\prs{v_i}_{i \in I}$ of $L_2 / L_1$. The union $\bigsqcup_{i \in I} F + v_i$ is disjoint and forms a fundamental domain fr $L_1$ in $\mbb{R}^n$.

If $L_1 \leq L_2$ is of finite index, we've found a fundamental domain of $L_1$ of volume $\brs{L_2 : L_1} \mrm{Vol}\prs{\mbb{R}^n / L_2}$ by \Cref{lemma:fd_volume}. 
\end{proof}

%LECTURE 3.4.2022

\begin{notation}
We denote by $\lambda\prs{A}$ the Lebesgue measure of a measurable subset $A \subseteq \mbb{R}^n$.
\end{notation}

\begin{definition}
Let $L \leq \mbb{R}^n$ be a discrete subgroup.
We define
\[\mrm{Vol}\prs{\mbb{R}^n / L}\]
to be $\lambda\prs{F}$ for any choice of measurable fundamental domain $F$ of $L$.
\end{definition}

\begin{corollary}
Let $L_1 \leq L_2 \leq \mbb{R}^2$ be subgroups of $\mbb{R}^n$ and assume that $L_2$ is a lattice. Then $L_1$ is a lattice iff $\abs{L_2 / L_1} < \infty$, and in this case $\Vol\prs{\mbb{R}^n / L_1} = \brs{L_2 : L_1} \cdot \mrm{Vol}\prs{\mbb{R}^n / L_2}$.
\end{corollary}

\begin{proof}
If $\set{v_i}_{i \in I}$ is a set of representatives of $L_2 / L_1$ in $L_2$., and $F$ is a parallelopiped of $L_2$ in $\mbb{R}^n$, then by the above $\tilde{F} = \bigsqcup_{i \in I} \prs{F + v_i}$ is a measurable fundamental domain for $L_1$ in $\mbb{R}^n$. If $\brs{L_2 : L_1} = \abs{I}$ is finite, then by definition we have
\begin{align*}
\mrm{Vol}\prs{\mbb{R}^n / L_1} &= \abs{I} \cdot \lambda\prs{F} \\
&= \brs{L_2 : L_1} \mrm{Vol}\prs{\mbb{R}^n / L_2}
\end{align*}
and also $L_1$ is a lattice since it is discrete and cocompact.
If $\abs{I} = \infty$, then $\mrm{Vol}\prs{\mbb{R}^n / L_1} = \infty$. Then $L_1$ cannot be a lattice.
\end{proof}

\begin{definition}
Let $\Lambda \subseteq K$ be a full module. The \emph{discriminant} $\Delta\prs{\Lambda}$ is defined as
\[\Delta\prs{\Lambda} \coloneqq \det\pmat{\vert & & \vert \\ \vec{\sigma}\prs{\alpha_1} & \cdots & \vec{\sigma}\prs{\alpha_n} \\ \vert & & \vert}^2\]
where
\[\Lambda = \Span_{\mbb{Z}}\prs{\alpha_1, \ldots, \alpha_n} \text{.}\]
\end{definition}

\begin{exercise}
Show that $\Delta\prs{\Lambda}$ is independent of the ordering of $\sigma_1, \ldots, \sigma_n$ of the embeddings and of the choice of basis for $\Lambda$.
\end{exercise}

\begin{remark}
Note that if $\vec{\alpha}, \vec{\beta}$ are two ordered bases of $K/\mbb{Q}$, then
\[\det\pmat{\vert & & \vert \\ \vec{\sigma}\prs{\alpha_1} & \cdots & \vec{\sigma}\prs{\alpha_n} \\ \vert & & \vert} \brs{\id_K}^{\vec{\beta}}_{\vec{\alpha}} = \det\pmat{\vert & & \vert \\ \vec{\sigma}\prs{\beta_1} & \cdots & \vec{\sigma}\prs{\beta_n} \\ \vert & & \vert} \text{.}\]
We also saw that $\Span_{\mbb{Z}}\prs{\alpha} = \Span_{\mbb{Z}}\prs{\vec{\beta}}$, so it follows that $\brs{\id_K}^{\vec{\beta}}_{\vec{\alpha}} \in \mrm{GL}_n\prs{\mbb{Z}}$.
\end{remark}

\begin{remark}
It holds that $\Delta\prs{\Lambda} \in \mbb{Q}$ by looking at automorphisms of $\mbb{C}$ over $\mbb{Q}$.
\end{remark}

\begin{remark}
Recall that the matrix $B \coloneqq \pmat{\vert & & \vert \\ \vec{\sigma}\prs{\alpha_1} & \cdots & \vec{\sigma}\prs{\alpha_n} \\ \vert & & \vert}$ is tightly related to $A \coloneqq \pmat{\vert & & \vert \\ \varphi\prs{\alpha_1} & \cdots & \varphi\prs{\alpha_n} \\ \vert & & \vert}$. We've shown that
\[\det\prs{B} = \pm \prs{2 i}^{r_2} \cdot \det\prs{A} \text{.}\]
It follows that
\[\Delta\prs{\Lambda} = 4^{r_2} \prs{-1}^{r_2} \mrm{Vol}^2\prs{\mbb{R}^2 / \varphi\prs{\Lambda}} \text{.}\]
This has sign $\prs{-1}^{r_2}$.
\end{remark}

\begin{remark}
There is a third important way to interpret the discriminant $\Delta\prs{\Lambda}$.

We look at the trace map
\begin{align*}
\mrm{Tr}_{K/\mbb{Q}} \colon K &\to \mbb{Q} \\
\alpha &\mapsto \sum_{i \in [n]} \sigma_i\prs{\alpha}
\end{align*}
and define
\begin{align*}
B \colon K \times K &\to \mbb{Q} \\
\prs{\alpha, \beta} &\mapsto \mrm{Tr}\prs{\alpha \cdot \beta} \text{.}
\end{align*}

If we choose the basis $\prs{\alpha_1, \ldots, \alpha_n}$ of $\Lambda$ and represent $B$ by the basis $\prs{\alpha_!, \ldots, \alpha_n}$ we get
\begin{align*}
\brs{B}_{\vec{\alpha}} &= \prs{\mrm{Tr}\prs{\alpha_i, \alpha_j}}_{i,j \in [n]}
\\&=
\prs{\trs{\vec{\sigma}\prs{\alpha_i}, \vec{\sigma}\prs{\alpha_j}}}_{i,j \in [n]}
\\&= \pmat{\vert & & \vert \\ \vec{\sigma}\prs{\alpha_1} & \cdots & \vec{\sigma}\prs{\alpha_n} \\ \vert & & \vert}^t  \pmat{\vert & & \vert \\ \vec{\sigma}\prs{\alpha_1} & \cdots & \vec{\sigma}\prs{\alpha_n} \\ \vert & & \vert} \text{.}
\end{align*}

We see that $\Delta\prs{\Lambda}$ is just the determinnat of a representing matrix of the trace form with respect to a basis of $\Lambda$ over $\mbb{Z}$. This again shows the rationality of $\Delta\prs{\Lambda}$.
\end{remark}

\begin{example}
Suppose $K = \mbb{Q}\prs{\alpha}$ and take
\[\Lambda = \Span_{\mbb{Z}}\prs{1, \alpha, \alpha^2, \ldots, \alpha^{n-1}} \text{.}\]
This is a full module in $K$, and we would like to find $\Delta\prs{\Lambda}$.
By definition,
\begin{align*}
\Delta\prs{\Lambda} &= \det\pmat{1 & \sigma_1\prs{\alpha} & \sigma_1\prs{\alpha}^2 & \cdots & \sigma_1\prs{\alpha}^{n-1} \\ \vdots & \vdots & \vdots & \cdots & \vdots \\ 1 & \sigma_n\prs{\sigma} & \sigma_n\prs{\alpha}^2 & \cdots & \sigma_n\prs{\alpha}^{n-1}}^2
\end{align*}
which is a Vandermonde matrix. The determinant is then $\prod_{i > j} \prs{\sigma_i\prs{\alpha} - \sigma_j\prs{\alpha}}^2$.
\end{example}

\begin{remark}
Consider $p\prs{x_1, \ldots, x_n} \coloneqq \prod_{i > j} \prs{x_i - x_j}^2$, which is a symmetric polynomial.
Let $R$ be the subring of symmetric polynomials in $\mbb{Z}\brs{x_1, \ldots, x_n}$. Then $R$ contains
\begin{align*}
s_1 &\coloneqq x_1 + \ldots + x_n \\
s_2 &\coloneqq \sum_{i < j} x_i x_j \\
\vdots \\
s_n &= x_1 \cdot \ldots \cdot x_n \text{.}
\end{align*}
Hence $R$ contains
\[\set{q\prs{s_1, \ldots, s_n}}{q \in \mbb{Z}\brs{x_1, \ldots, x_n}} \text{.}\]
A theorem states that this is in fact equality. 

So, in the above example, $\Sigma\prs{\Lambda}$ is a polynomial in the $s_i$, which are the coefficients of the minimal polynomial of $\alpha$ over $\mbb{Q}$. This happens to be the discriminant of that minimal polynomial.
\end{remark}

\begin{example}
If $\mbb{Q}\prs{\alpha}$ is quadratic and the minimal polynomial of $\alpha$ is $x^2 + bx + c$, then
\begin{align*}
\Delta\prs{\Span_{\mbb{Z}}\prs{1, \alpha}} = \det\pmat{1 & \frac{-b + \sqrt{b^2 - 4c}}{2} \\ 1 & \frac{-b - \sqrt{b^2 - 4c}}{2}}^2 = b^2 - 4c
\end{align*}
which is the usual discriminant.
\end{example}

\begin{definition}[Order]
An \emph{order} $\mcal{O}$ in $K$ is a full module in $K$ which is also a ring.
\end{definition}

\begin{example}
If $K = \mbb{Q}\prs{\alpha}$ and the minimal polynomial of $\alpha$ is over $\mbb{Z}$, write
\[\alpha^n + a_{n-1} \alpha^{n-1} + \ldots + a_0 = 0\]
for $a_i \in \mbb{Z}$. Then
\[\mbb{Z}\brs{\alpha} = \Span_{\mbb{Z}}\set{1, \alpha, \ldots, \alpha^{n-1}} \text{.}\]
Then $\mcal{O} \coloneqq \mbb{Z}\brs{\alpha}$ is an order.
\end{example}

\begin{remark}
If $\alpha$ satisfies $\alpha^n + a_{n-1} \alpha^{n-1} + \ldots + a_0$ with coefficients in $\mbb{Q}$.
Taking $m$ to be the lowest-common-multipler of the denominators, we get
\[\sum_{i = 0}^n m^{n-i} a_i \prs{m \alpha}^i\]
where $a_n = 1$.
We get that there's $m \in \mbb{Z}$ such that $m \alpha$ has a minimal polynomial over $\mbb{Z}$. 
\end{remark}

We give another example that shows orders exist.

\begin{example}
Let $\vec{\alpha} \coloneqq \prs{\alpha_1, \ldots, \alpha_n}$ be a basis of $K/\mbb{Q}$. Consider the $\mbb{Q}$-linear map $m_\beta \colon K \to K$ which is multiplication by $\beta$. We consider the matrix $\brs{m_\beta}_{\vec{\alpha}} \in M_n\prs{\mbb{Q}}$. Then the map $\beta \mapsto \brs{m_{\beta}}_{\vec{\alpha}}$ is a $\mbb{Q}$-algebra homomorphism (and is in particular a field embedding).

Pulling back $M_n\prs{\mbb{Z}}$ under this homomorphism, one can check that it contains a basis. Hence this gives an order inside $K$. 
\end{example}

\begin{remark}
If $\Lambda = \Span_{\mbb{Z}}\prs{\alpha_1, \ldots, \alpha_n}$ is a full module, then $\Lambda$ is an order if and only if $\brs{m_{\alpha_i}}_{\vec{\alpha}} \in M_n\prs{\mbb{Z}}$ for all $i \in [n]$, and $1 \in \Lambda$.
\end{remark}

\begin{proposition}
If $\mcal{O} \subseteq K$ is an order, then $\Delta\prs{\mcal{O}} \in \mbb{Z}$.
\end{proposition}

\begin{proof}
Let $\vec{\alpha} = \prs{\alpha_1, \ldots, \alpha_n}$ be a basis of $\mcal{O}$ over $\mbb{Z}$. 
We conclude that
\[\brs{m_{\alpha_i}}_{\vec{\alpha}} \brs{m_{\alpha_j}}_{\vec{\alpha}} = \brs{m_{\alpha_i \cdot \alpha_j}}_{\vec{\alpha}} \in M_n\prs{\mbb{Z}}\]
so
\[\mrm{Tr}_{K/\mbb{Q}}\prs{\alpha_i \alpha_j} \stackrel{(*)}{=} \mrm{Tr}\brs{m_{\alpha_i \cdot \alpha_j}}_{\vec{\alpha}} \in \mbb{Z}\]
so
\[\Delta\prs{\mcal{O}} = \det\prs{\mrm{Tr}\prs{\alpha_i \alpha_j}} \in \mbb{Z} \text{.}\]

We're left to explain $(*)$. For $\beta \in K$ we defined
\[\mrm{Tr}_{K/\mbb{Q}}\prs{\beta} = \sum_{i \in [n]} \sigma_i\prs{\beta} \text{.}\]
But, it holds that
\[\mrm{Tr}_{K/\mbb{Q}}\prs{\beta} = \mrm{Tr}\brs{m_{\beta}}_{B}\]
for any $\mbb{Q}$-basis $B$ of $K$ (this is the usual definition).
\end{proof}

\begin{proposition}
Any two orders in $K$ are contained in a single order.
\end{proposition}

\begin{proof}
If $\mcal{O}_1, \mcal{O}_2 \subseteq K$ are order, the product
\[\mcal{O}_1 \cdot \mcal{O}_2 = \set{\sum_{i \in [\ell]} a_i b_i}{\substack{a_i \in \mcal{O}_1 \\ b_i \in \mcal{O}_2}}\]
is clearly an order that contains both $\mcal{O}_1$ and $\mcal{O}_2$.
\end{proof}

\begin{theorem}
There exists a unique maximal order in $K$.
\end{theorem}

\begin{proof}
By the previous proposition, it suffices to show that any sequence of order $\mcal{O}_1 \subseteq \mcal{O}_2 \subseteq \ldots$ stabilizes.

Note that $\brs{\mcal{O}_{i+1} : \mcal{O}_{i}} < \infty$ for all $i \in \mbb{Z}_+$. Now, $\brs{\mcal{O}_{i+1} : \mcal{O}_i} = \brs{\varphi\prs{\mcal{O}_{i+1}} : \varphi\prs{\mcal{O}_i}}$ and by the index formula we get
\[\mrm{Vol}\prs{\mbb{R}^n / \varphi\prs{\mcal{O}_1}}^2 = \brs{\mcal{O}_i \colon \mcal{O}_1}^2 \mrm{Vol}\prs{\mbb{R}^n / \varphi\prs{\mcal{O}_i}}^2 \text{.} \]
Because both volumes squared are integral up to $\prs{-4}^{r_2}$, we get that $\brs{\mcal{O}_i : \mcal{O}_1}^2$ must divide a given fixed integer. Hence $\brs{\mcal{O}_i : \mcal{O}_1}$ must stabilize.
\end{proof}

\begin{exercise}
Note that the argument proving the stabilization of $\mcal{O}_i$ relied on the following lemma:
If $\Lambda_1 \leq \Lambda_2$ are two full modules, then \[\Delta\prs{\Lambda_2} \cdot \brs{\Lambda_2 : \Lambda_1} = \Delta\prs{\Lambda_1}\text{.}\]
Prove this in two ways:
\begin{enumerate}
\item Using $\Delta\prs{\Lambda} = \prs{\prs{2i}^{r_2} \mrm{Vol}\prs{\mbb{R}^n / \varphi\prs{\Lambda}}}^2$.
\item Using $\Delta\prs{\Lambda} = \det\prs{\sigma_i\prs{\alpha_j}}_{i,j \in [n]}$, where $\prs{\alpha_1, \ldots, \alpha_n}$ is a $\mbb{Z}$-basis.
\end{enumerate}
\end{exercise}

%LECTURE 10.4.22

\begin{notation}
Denote by $\mcal{O}_K$ the maximal order of a field $K$.
\end{notation}

\begin{example}
We calculate $\mcal{O}_K$ for $K = \mbb{Q}\prs{\sqrt{d}}$ with $d \in \mbb{Z} \setminus \set{0,1}$ which is square-free.
Let $\mcal{O} = \mbb{Z}\brs{\sqrt{d}}$, which is an order. We calculate
\[
\Delta\prs{\mcal{O}} = \det\pmat{\Tr\prs{1} & \Tr\prs{\sqrt{d}} \\ \Tr\prs{\sqrt{d}} & \Tr\prs{\sqrt{d}}} = \det\pmat{2 & 0 \\ 0 & 2d} = 4d \text{.}
\]

By the relation
\[\mbb{Z} \ni \Delta\prs{\mcal{O}} = \brs{\mcal{O}_K : \mcal{O}}^2 \Delta\prs{\mcal{O}_K}\]
we see that the only option for strict in inclusion is an order $\mcal{O} \subseteq \mcal{O}_K$ containing $0$ as a subgroup of index $2$.
Assuming this is the case, there are $a,b \in \mbb{Z}$ such that $\frac{a + b\sqrt{d}}{2} \in \mcal{O}_K \setminus \mcal{O}$. WLOG we can assume $a,b \in \set{0,1}$ where not both are $0$, and $a = 1, b = 0$ is impossible because $\frac{1}{2}$ has norm $\frac{1}{4}$ and therefore doesn't belong to any order.
By similar reasoning, we cannot have $a = 0, b = 1$, since $N\prs{\frac{\sqrt{d}}{2}} = - \frac{d}{4}$ which isn't an integer since $d$ is square-free.

We're left with the possibility $\prs{a,b} = \prs{1,1}$. In this case we have
\[\mcal{O}_K = \Span_{\mbb{Z}}\prs{1, \frac{1 + \sqrt{d}}{2}} \text{.}\]
Indeed, we get $\mcal{O} \subseteq \Span_{\mbb{Z}}\set{1, \frac{1 + \sqrt{d}}{2}} \subseteq \mcal{O}_K$ and $\brs{\mcal{O}_K : \mcal{O}}$ so there's nothing in between.

Denote $\alpha = \frac{1 + \sqrt{1}}{2}$, and $B = \prs{1, \alpha}$. Then
\[\brs{m_\alpha}_B = \pmat{0 & \frac{d-1}{4} \\ 1 & 1} \text{.}\]
Hnece $\Span_{\mbb{Z}}\prs{1, \alpha}$ is an order if and only if $\frac{d - 1}{4} \in \mbb{Z}$. We deduce that $\mcal{O}$ is the maximal order if and only if $d \equiv 2 \mod{4}$ or $d \equiv 3 \mod{4}$. If $d \equiv 1 \mod{4}$, then $\mcal{O} \subsetneq \mcal{O}_K$ so $\mcal{O}$ isn't maximal.
\end{example}

\begin{exercise}
Calculate the maximal order in $\mbb{Q}\prs{\sqrt[3]{2}}$.
\end{exercise}

\begin{solution}
Let $\alpha = \sqrt[3]{2}$ and guess that $\mcal{O} \coloneqq \mbb{Z}\brs{\alpha} = \Span_{\mbb{Z}}\prs{1, \alpha, \alpha^2}$ is a maximal order.
We calculate
\[\Delta\prs{\mcal{O}} = \det\pmat{\Tr\prs{1} & \Tr\prs{\alpha} & \Tr\prs{\alpha^2} \\ \Tr\prs{\alpha} & \Tr\prs{\alpha^2} & \Tr\prs{2} \\ \Tr\prs{\alpha^2} & \Tr\prs{2} & 2 \Tr\prs{\alpha}} = \det \pmat{3 & 0 & 0 \\ 0 & 0 & 6 \\ 0 & 6 & 0} = -2^2 \cdot 3^3 \text{.}\]

If $\mcal{O}$ is \emph{not} maximal, we should look for a full module $\Lambda$ that contains $\mcal{O}$ as a subgroup of index $2$, $3$, or $6$, since the order must divide $\Delta\prs{\mcal{O}}$.
\end{solution}

\begin{exercise}
Let $\xi \coloneqq e^{\frac{2 \pi i}{5}}$ be a primitive fifth root of unity, with minimal polynomial $\Phi\prs{x} \coloneqq x^4 + x^3 + x^2 + x + 1$. Calculate $\mcal{O}_{\mbb{Q}\prs{\xi}}$.
\end{exercise}

\subsection{Rings of Integers \& Integral Extensions}

Let $\Omega$ be a field and let $A \subseteq \Omega$ be a ring.

\begin{definition}[Integral Element]
An element $\alpha \in \Omega$ is \emph{integral} over $A$ if there is a monic polynomial $p \in A\brs{x}$ such that $p\prs{\alpha} = 0$.
\end{definition}

\begin{example}
If $A$ is a field, then $\alpha$ is integral over $A$ if and only if $\alpha$ is algebraic over $A$.
\end{example}

\begin{theorem}\label{theorem:integral_element_condition}
The following are equivalent.

\begin{enumerate}
\item $\alpha \in \Omega$ is integral over $A$.
\item The ring $A\brs{\alpha}$ is a finitely-generated $A$-module.
\item There exists a finitely-generated $A$-module $M \subseteq \Omega$ which is $\alpha$-stable in the sense of $\alpha M \subseteq M$.
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{description}
\item[$\prs{1} \implies \prs{2}$:]
Assume that $p\prs{\alpha}$ for some $p\prs{x} = x^n + \sum_{i = 0}^{n-1} a_i x^i$.
Then $\alpha^n = \sum_{i=0}^{n-1} a_i \alpha^i$ so
$A\brs{\alpha}$ is generated as an $A$-module by $1, \alpha, \ldots, \alpha^{n-1}$.

\item[$\prs{2} \implies \prs{3}$:]
This is clear by taking $M = A\brs{\alpha}$.

\item[$\prs{3} \implies \prs{1}$:]
Let $M$ be as in condition (3). Let $\beta_1, \ldots, \beta_n \in M$ generate $M$ as an $A$-module.
Consider the map
\begin{align*}
\varphi \colon A^n &\to M \\
\pmat{a_1 \\ \ldots \\ a_n} &\mapsto \sum_{i \in [n]} a_i \beta_i \text{,}
\end{align*}
which is therefore onto.

The fact that $M$ is $\alpha$-stable means that there are $a_{i,j} \in A$ such that
\[m_{\alpha}\prs{\beta_j} = \alpha \beta_j = \sum_{i \in [n]} a_{i,j} \beta_j \text{.}\]
Let $L = \prs{a_{i,j}}_{i,j \in [n]}$.
We get a commutative diagram
\[
\begin{tikzcd}
A^n \arrow[d, swap, "L"] \arrow[r] & M \arrow[d, "m_\alpha"] \\ A^n \arrow[r] & M
\end{tikzcd}
\]
where the upper map is $\pmat{a_1 \\ \vdots \\ a_n} \mapsto \sum a_i \beta_i$.
We get
\[\prs{\beta_1, \ldots, \beta_n} L = \prs{\alpha \beta_1, \ldots, \alpha \beta_n} \text{,}\]
so $\alpha$ is an eigenvalue of $L$. We get that $\alpha$ is a root of the characteristic polynomial of $L$, which is monic over $A$.
\end{description}
\end{proof}

\begin{theorem}
The set
\[\bar{A}^{\Omega} \coloneqq \set{\alpha \in \Omega}{\text{$\alpha$ is integral over $A$.}}\]
forms a subring over $\Omega$.
\end{theorem}

\begin{proof}
Clearly $\bar{A}^\Omega$ contains $A$, so it contains the unit. We have to show that it is closed under addition and multiplication. Let $\alpha, \beta \in \bar{A}^{\Omega}$. By \Cref{theorem:integral_element_condition} there are $M,N \subseteq \Omega$ both finitely-generated such that $M,N$ are respectively $\alpha,\beta$-stable.

Then $M \cdot N$ is an $A$-module which is finitely-generated (it is generated by the products of generators of $M$ and of $N$). Clearly, this is $\alpha+\beta$-stable and $\alpha\cdot \beta$-stable, hence \Cref{theorem:integral_element_condition} gives the result.
\end{proof}

\begin{definition}
The above-mentioned ring is called the \emph{integral closure} of $A$ in $\Omega$.
\end{definition}

\begin{example}
Let $A \subseteq \Omega$ be a field. Then $\bar{A}^{\Omega}$ is the subfield of $A$-algebraic elements in $\Omega$.

For example, $\mbb{Q}^{\mbb{C}} = \mbb{Q}$ is the algebraic closure of $\mbb{Q}$ in $\mbb{C}$.
\end{example}

\begin{proposition}
Let $\Omega = K$ be a number field, and let $A = \mbb{Z} \subseteq \Omega$.
Then $\bar{\mbb{Z}}^K = \mcal{O}_K$. 
\end{proposition}

\begin{proof}
For $\alpha \in \mcal{O}_K$ we know that $\mcal{O}_K$ is a finitely-generated $\mbb{Z}$-module in $\Omega$ that is $\alpha$-stable. By \Cref{theorem:integral_element_condition} we get that $\alpha$ is integral over $\mbb{Z}$.

In the other direction, if $\alpha$ i integral over $\mbb{Z}$, the ring $\mbb{Z}\brs{\alpha}$ is finitely-generated by \Cref{theorem:integral_element_condition}. Then $\mbb{Z}\brs{\alpha}$ is an order, which contains $\mcal{O}_K$ and therefore equals to it. We get that $\alpha \in \mcal{O}_K$, as required.
\end{proof}

\begin{lemma}
Let $A \subseteq \Omega_1 \subseteq \Omega_2$ where $A$ is a ring and $\Omega_i$ are fields. Then
\begin{enumerate}
\item $\bar{A}^{\Omega_2} \cap \Omega_1 = \bar{A}^{\Omega_1}$.
\item $\bar{A}^{\Omega_2} = \overline{\bar{A}^{\Omega_1}}^{\Omega_2}$.
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item%1
This is immediate from definition.
\item%2
Since $A \subseteq \bar{A}^{\Omega_1}$, we have $\bar{A}^{\Omega_2} \subseteq \overline{\bar{A}^{\Omega_1}}^{\Omega_2}$. We have to show that there's actual equality.

Let $\alpha \in \overline{\bar{A}^{\Omega_1}}^{\Omega_2}$. We can write
\[\alpha^n = \sum_{i = 0}^{n-1} b_i \alpha^i\]
for $b_i \in \bar{A}^{\Omega_1}$.
We show that the ring $A\brs{b_1, \ldots, b_{n-1}, \alpha} \subseteq \Omega_2$ is finitely-generated as an $A$-module and get the result by \Cref{theorem:integral_element_condition}. 
This follows from induction by the following lemma.
\end{enumerate}

\begin{lemma}
Let $A \subseteq B \subseteq C$ be rings.
\end{lemma}
\end{proof}

\end{document}